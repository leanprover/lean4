[4, 5, 6]
defInst.lean:8:26-8:32: error(lean.synthInstanceFailed): failed to synthesize instance of type class
  BEq Foo

Hint: Adding the command `deriving instance BEq for Foo` may allow Lean to derive the missing instance.
fun x y => sorry : (x y : Foo) → ?m x y
[4, 5, 6]
fun x y => x == y : Foo → Foo → Bool
[("hello", "hello")]
false
true
true
@[implicit_reducible] def instMonadM : Monad M :=
ReaderT.instMonad
